<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Min V√§lm√•ende-app</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Onest:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #f0f4f8; --card: #ffffff; --text: #1e3a3a; --text2: #607070;
  --accent: #2d5a27; --accent2: #3a7a32; --nav-bg: #ffffff;
  --input-bg: #f4f7f9; --border: rgba(0,0,0,0.07);
  --shadow: 0 4px 24px rgba(0,0,0,0.07);
  --shadow-lg: 0 8px 40px rgba(0,0,0,0.12);
  --radius: 20px; --nav-w: 220px;
}
body.dark {
  --bg: #0f1419; --card: #1a2230; --text: #e8f0f0; --text2: #8aa0a0;
  --accent: #4caf50; --accent2: #66bb6a; --nav-bg: #141c28;
  --input-bg: #1e2a3a; --border: rgba(255,255,255,0.07);
  --shadow: 0 4px 24px rgba(0,0,0,0.3); --shadow-lg: 0 8px 40px rgba(0,0,0,0.4);
}
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
body { font-family: 'Onest', -apple-system, sans-serif; background: var(--bg); color: var(--text); overflow: hidden; transition: background .4s, color .4s; }

/* ‚ïê‚ïê‚ïê LOCK ‚ïê‚ïê‚ïê */
#lock {
  position:fixed;inset:0;background:linear-gradient(160deg,#1a3a2a,#0d1f14);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:18px;z-index:9999;
}
#lock.hidden{display:none;}
.lock-icon{font-size:3rem;animation:lockPulse 2s infinite ease-in-out;}
@keyframes lockPulse{0%,100%{transform:scale(1);opacity:.9;}50%{transform:scale(1.08);opacity:1;}}
.lock-title{color:#fff;font-size:1.5rem;font-weight:700;letter-spacing:-.5px;}
.lock-sub{color:rgba(255,255,255,.5);font-size:.9rem;margin-top:-10px;}
.pin-dots{display:flex;gap:14px;margin:4px 0;}
.pin-dot{width:14px;height:14px;border-radius:50%;border:2px solid rgba(255,255,255,.35);background:transparent;transition:.15s;}
.pin-dot.filled{background:#4caf50;border-color:#4caf50;transform:scale(1.2);}
.pin-dot.error{background:#ef5350;border-color:#ef5350;animation:shake .4s ease;}
@keyframes shake{0%,100%{transform:translateX(0);}20%{transform:translateX(-6px);}40%{transform:translateX(6px);}60%{transform:translateX(-4px);}80%{transform:translateX(4px);}}
.lock-err{color:#ef5350;font-size:.85rem;min-height:18px;text-align:center;}
.numpad{display:grid;grid-template-columns:repeat(3,70px);gap:12px;}
.nbtn{width:70px;height:70px;border-radius:50%;border:none;background:rgba(255,255,255,.1);color:#fff;font-size:1.5rem;font-weight:500;cursor:pointer;backdrop-filter:blur(4px);transition:.15s;display:flex;align-items:center;justify-content:center;}
.nbtn:active{background:rgba(255,255,255,.25);transform:scale(.93);}
.nbtn.empty{background:transparent;pointer-events:none;}
.faceid-btn{background:none;border:1.5px solid rgba(255,255,255,.3);color:rgba(255,255,255,.7);padding:9px 22px;border-radius:20px;font-size:.9rem;font-family:inherit;cursor:pointer;display:flex;align-items:center;gap:8px;}
.faceid-btn.hidden{display:none;}

/* ‚ïê‚ïê‚ïê LAYOUT ‚ïê‚ïê‚ïê */
#shell{display:flex;position:fixed;inset:0;}

/* Sidebar (iPad/desktop) */
#sidebar{
  width:var(--nav-w);flex-shrink:0;background:var(--nav-bg);
  box-shadow:2px 0 20px rgba(0,0,0,.08);
  display:flex;flex-direction:column;padding:24px 16px 20px;
  gap:6px;z-index:10;
}
.side-logo{font-size:1.1rem;font-weight:700;color:var(--accent);padding:0 8px 20px;border-bottom:1px solid var(--border);margin-bottom:6px;}
.side-btn{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:14px;border:none;background:none;color:var(--text2);font-family:inherit;font-size:.95rem;font-weight:500;cursor:pointer;text-align:left;transition:.2s;width:100%;}
.side-btn .ico{font-size:1.3rem;width:28px;text-align:center;}
.side-btn:hover{background:var(--input-bg);color:var(--text);}
.side-btn.active{background:linear-gradient(135deg,rgba(45,90,39,.15),rgba(45,90,39,.08));color:var(--accent);font-weight:600;}
.side-version{margin-top:auto;font-size:.75rem;color:var(--text2);padding:8px 8px 0;opacity:.6;}

/* Bottom nav (mobile) */
#bottomnav{
  display:none;justify-content:space-around;background:var(--nav-bg);
  box-shadow:0 -2px 16px rgba(0,0,0,.08);flex-shrink:0;
  padding-bottom:env(safe-area-inset-bottom,0);
}
.bnav-btn{background:none;border:none;color:var(--text2);display:flex;flex-direction:column;align-items:center;font-size:.65rem;font-family:inherit;font-weight:500;cursor:pointer;padding:8px 6px;flex:1;gap:3px;transition:.2s;}
.bnav-btn .ico{font-size:1.4rem;}
.bnav-btn.active{color:var(--accent);font-weight:700;}

/* Content */
#content{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;padding:clamp(14px,3vw,28px);}

/* Responsive switch */
@media (max-width:768px){
  #sidebar{display:none;}
  #bottomnav{display:flex;}
  #shell{flex-direction:column;}
  #content{padding:12px 12px 8px;}
}

/* ‚ïê‚ïê‚ïê TABS ‚ïê‚ïê‚ïê */
.tab{display:none;}
.tab.active{display:block;animation:fadeIn .4s ease;}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}

/* ‚ïê‚ïê‚ïê CARDS ‚ïê‚ïê‚ïê */
.card{background:var(--card);border-radius:var(--radius);padding:clamp(14px,2.5vw,22px);margin-bottom:14px;box-shadow:var(--shadow);border:1px solid var(--border);}
.card-sm{padding:clamp(10px,2vw,16px);border-radius:16px;}

/* Page header */
.page-title{font-size:clamp(1.3rem,4vw,2rem);font-weight:700;margin-bottom:18px;letter-spacing:-.5px;}

/* ‚ïê‚ïê‚ïê GRATITUDE ‚ïê‚ïê‚ïê */
.grat-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;}
.grat-img{width:100%;border-radius:16px;display:block;object-fit:cover;height:clamp(130px,22vh,220px);}
.grat-sentences{text-align:left;padding:4px 0;}
.grat-line{font-weight:600;font-size:clamp(.9rem,2.5vw,1.05rem);padding:10px 0;display:flex;align-items:center;gap:10px;}
.grat-line:not(:last-child){border-bottom:1px solid var(--border);}
.btn3d{background:linear-gradient(145deg,var(--accent2),var(--accent));color:#fff;border:none;border-radius:14px;padding:11px 18px;font-size:clamp(.8rem,2vw,.95rem);font-weight:700;font-family:inherit;cursor:pointer;box-shadow:0 5px 0 #1a3a17,0 8px 16px rgba(0,0,0,.25);transform:translateY(0);transition:transform .1s,box-shadow .1s;}
.btn3d:active{transform:translateY(4px);box-shadow:0 1px 0 #1a3a17,0 4px 8px rgba(0,0,0,.2);}

/* ‚ïê‚ïê‚ïê CALM ‚ïê‚ïê‚ïê */
#tab-calm{background:linear-gradient(150deg,#071420 0%,#0d2137 45%,#0a2818 100%);border-radius:var(--radius);padding:clamp(14px,3vw,24px);min-height:calc(100vh - 160px);}
@media(max-width:768px){#tab-calm{min-height:auto;}}
.calm-title{color:#cce8ff;font-size:clamp(1.2rem,3.5vw,1.8rem);font-weight:700;text-align:center;margin-bottom:6px;}
#timer-disp{font-size:clamp(2.2rem,8vw,4rem);font-weight:700;color:#7dd4fc;text-align:center;letter-spacing:2px;text-shadow:0 0 30px rgba(125,212,252,.6);margin:4px 0;}
#breath-lbl{font-size:clamp(.95rem,2.8vw,1.2rem);font-weight:600;color:#a5f3fc;text-align:center;min-height:26px;margin:4px 0;transition:color .5s;}

/* Breath circle */
.breath-wrap{position:relative;margin:10px auto;width:clamp(140px,30vw,210px);height:clamp(140px,30vw,210px);display:none;align-items:center;justify-content:center;}
.breath-wrap.show{display:flex;}
.b-ring{position:absolute;border-radius:50%;width:100%;height:100%;
  background:radial-gradient(circle at 33% 33%,#b8e8ff,#0369a1 55%,#012d52);
  box-shadow:0 0 50px rgba(125,212,252,.4),0 0 100px rgba(125,212,252,.15),inset 0 -10px 25px rgba(0,0,0,.35),inset 0 10px 25px rgba(255,255,255,.12);}
.b-shine{position:absolute;border-radius:50%;width:58%;height:58%;background:radial-gradient(circle at 33% 33%,rgba(255,255,255,.28),transparent 65%);}
.b-txt{position:relative;z-index:2;color:#fff;font-weight:700;font-size:clamp(.8rem,2.2vw,1rem);text-align:center;text-shadow:0 2px 6px rgba(0,0,0,.5);white-space:pre-line;font-family:inherit;}

@keyframes bIn{from{transform:scale(.55);box-shadow:0 0 20px rgba(125,212,252,.2),inset 0 -10px 25px rgba(0,0,0,.35);}to{transform:scale(1);box-shadow:0 0 70px rgba(125,212,252,.7),0 0 120px rgba(125,212,252,.2),inset 0 -10px 25px rgba(0,0,0,.35);}}
@keyframes bHold{0%,100%{transform:scale(1);box-shadow:0 0 70px rgba(125,212,252,.7),inset 0 -10px 25px rgba(0,0,0,.35);}}
@keyframes bOut{from{transform:scale(1);box-shadow:0 0 70px rgba(125,212,252,.7),inset 0 -10px 25px rgba(0,0,0,.35);}to{transform:scale(.55);box-shadow:0 0 20px rgba(125,212,252,.2),inset 0 -10px 25px rgba(0,0,0,.35);}}

/* Manual time */
.time-input-row{display:flex;align-items:center;gap:10px;margin:10px 0;justify-content:center;}
.time-input{width:80px;padding:8px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.1);color:#fff;font-size:1.1rem;font-family:inherit;text-align:center;}
.time-input::placeholder{color:rgba(255,255,255,.4);}
.time-label{color:#a5f3fc;font-size:.9rem;}

/* Sound controls */
.sound-panel{background:rgba(255,255,255,.07);border-radius:14px;padding:12px 14px;margin:10px 0;}
.sound-row{display:flex;align-items:center;gap:10px;padding:6px 0;}
.sound-row:not(:last-child){border-bottom:1px solid rgba(255,255,255,.06);}
.snd-label{color:#a5f3fc;font-size:.9rem;width:80px;flex-shrink:0;}
.snd-toggle{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.18);color:#fff;padding:4px 14px;border-radius:20px;cursor:pointer;font-size:.82rem;font-family:inherit;white-space:nowrap;transition:.2s;}
.snd-toggle.on{background:rgba(125,212,252,.25);border-color:rgba(125,212,252,.4);color:#a5f3fc;}
input[type=range]{flex:1;accent-color:#7dd4fc;height:4px;}

.calm-btns{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;}
.calm-btn{flex:1;min-width:70px;padding:10px 6px;border-radius:12px;border:none;font-family:inherit;font-weight:600;font-size:.9rem;cursor:pointer;background:rgba(255,255,255,.12);color:#cce8ff;transition:.2s;}
.calm-btn:active{opacity:.7;}
.calm-btn.stop{background:rgba(255,100,100,.15);color:#fca5a5;}
.calm-btn.start-custom{background:rgba(125,212,252,.2);color:#7dd4fc;}

/* ‚ïê‚ïê‚ïê PEPP ‚ïê‚ïê‚ïê */
.pepp-stars{display:flex;justify-content:center;gap:8px;margin-bottom:10px;}
.p-star{font-size:1.3rem;animation:twinkle 2.2s infinite ease-in-out;}
.p-star:nth-child(2){animation-delay:.35s;}.p-star:nth-child(3){animation-delay:.7s;}
@keyframes twinkle{0%,100%{opacity:.35;transform:scale(.88);}50%{opacity:1;transform:scale(1.18);}}
.pepp-card{background:linear-gradient(145deg,#163320,#2d5a27);border-radius:22px;padding:clamp(20px,4vw,34px);margin-bottom:16px;position:relative;overflow:hidden;box-shadow:0 12px 40px rgba(45,90,39,.35),inset 0 1px 0 rgba(255,255,255,.08);}
.pepp-card::before{content:'';position:absolute;top:-50px;right:-50px;width:180px;height:180px;border-radius:50%;background:rgba(255,255,255,.04);}
.pepp-card::after{content:'';position:absolute;bottom:-40px;left:-40px;width:140px;height:140px;border-radius:50%;background:rgba(255,255,255,.03);}
.pepp-emoji{font-size:clamp(2rem,5vw,2.8rem);display:block;margin-bottom:10px;}
#quote-txt{font-style:italic;font-size:clamp(1rem,2.8vw,1.25rem);color:#d4f5db;font-weight:500;line-height:1.65;position:relative;z-index:1;}
.pepp-btn{background:linear-gradient(145deg,var(--accent2),var(--accent));color:#fff;border:none;border-radius:18px;padding:clamp(13px,2.5vw,17px);font-size:clamp(.95rem,2.5vw,1.1rem);font-weight:700;font-family:inherit;cursor:pointer;box-shadow:0 6px 0 #1a3a17,0 10px 24px rgba(0,0,0,.2);transform:translateY(0);transition:.1s;width:100%;}
.pepp-btn:active{transform:translateY(5px);box-shadow:0 1px 0 #1a3a17;}

/* ‚ïê‚ïê‚ïê ALLM√ÑNT (ny flik) ‚ïê‚ïê‚ïê */
.info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-bottom:14px;}
.info-card{background:var(--card);border-radius:var(--radius);padding:clamp(14px,2.5vw,22px);box-shadow:var(--shadow);border:1px solid var(--border);text-align:center;}
.info-icon{font-size:2rem;margin-bottom:8px;}
.info-label{font-size:.8rem;color:var(--text2);font-weight:500;text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px;}
.info-value{font-size:1.8rem;font-weight:700;color:var(--accent);}
.info-sub{font-size:.8rem;color:var(--text2);margin-top:2px;}
.el-zone{display:flex;align-items:center;gap:8px;justify-content:center;margin-top:10px;}
.zone-btn{padding:5px 14px;border-radius:10px;border:1.5px solid var(--border);background:none;color:var(--text2);font-family:inherit;font-size:.85rem;cursor:pointer;transition:.2s;}
.zone-btn.active{background:var(--accent);color:#fff;border-color:var(--accent);}
.stat-list{list-style:none;}
.stat-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid var(--border);font-size:.95rem;}
.stat-item:last-child{border-bottom:none;}
.stat-val{font-weight:700;color:var(--accent);}
.streak-badge{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,#f97316,#ea580c);color:#fff;padding:6px 14px;border-radius:20px;font-weight:700;font-size:.9rem;margin-top:8px;}

/* ‚ïê‚ïê‚ïê INST√ÑLLNINGAR ‚ïê‚ïê‚ïê */
.s-card{background:var(--card);border-radius:var(--radius);padding:clamp(14px,2.5vw,22px);margin-bottom:14px;box-shadow:var(--shadow);border:1px solid var(--border);}
.s-card h3{margin:0 0 12px;color:var(--accent);font-size:1rem;font-weight:700;}
.s-row{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border);}
.s-row:last-child{border-bottom:none;}
.s-lbl{font-size:clamp(.88rem,2.5vw,1rem);color:var(--text);}
.toggle{position:relative;width:50px;height:28px;flex-shrink:0;}
.toggle input{opacity:0;width:0;height:0;}
.slider{position:absolute;cursor:pointer;inset:0;background:#ccc;border-radius:28px;transition:.3s;}
.slider:before{content:"";position:absolute;width:20px;height:20px;left:4px;bottom:4px;background:#fff;border-radius:50%;transition:.3s;}
input:checked+.slider{background:var(--accent);}
input:checked+.slider:before{transform:translateX(22px);}

/* Theme selector */
.theme-sel{display:flex;gap:8px;flex-wrap:wrap;}
.theme-opt{flex:1;min-width:80px;padding:10px 6px;border-radius:12px;border:2px solid var(--border);background:var(--input-bg);color:var(--text2);font-family:inherit;font-size:.85rem;font-weight:600;cursor:pointer;text-align:center;transition:.2s;}
.theme-opt.active{border-color:var(--accent);color:var(--accent);background:rgba(45,90,39,.08);}

.input-row{display:flex;gap:8px;margin-top:10px;}
.txt-in{flex:1;padding:11px 14px;border-radius:12px;border:1.5px solid var(--border);background:var(--input-bg);color:var(--text);font-size:.9rem;font-family:inherit;}
.txt-in:focus{outline:none;border-color:var(--accent);}
.add-btn{padding:11px 16px;border-radius:12px;border:none;background:var(--accent);color:#fff;font-weight:700;font-family:inherit;cursor:pointer;white-space:nowrap;}
.item-list{margin-top:10px;max-height:200px;overflow-y:auto;}
.list-item{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-radius:10px;margin-bottom:6px;background:var(--input-bg);font-size:.88rem;}
.del-btn{background:none;border:none;color:#ef5350;cursor:pointer;font-size:1.1rem;padding:0 4px;}

#screen-info{font-size:.72rem;color:var(--text2);margin-bottom:12px;background:var(--card);padding:4px 12px;border-radius:20px;display:inline-block;border:1px solid var(--border);}
</style>
</head>
<body>

<!-- LOCK -->
<div id="lock">
  <div class="lock-icon">üîí</div>
  <div class="lock-title">Min V√§lm√•ende-app</div>
  <div class="lock-sub">Ange din PIN-kod</div>
  <div class="pin-dots">
    <div class="pin-dot" id="d0"></div><div class="pin-dot" id="d1"></div>
    <div class="pin-dot" id="d2"></div><div class="pin-dot" id="d3"></div>
    <div class="pin-dot" id="d4"></div><div class="pin-dot" id="d5"></div>
  </div>
  <div class="lock-err" id="lock-err"></div>
  <div class="numpad">
    <button class="nbtn" onclick="pp('1')">1</button>
    <button class="nbtn" onclick="pp('2')">2</button>
    <button class="nbtn" onclick="pp('3')">3</button>
    <button class="nbtn" onclick="pp('4')">4</button>
    <button class="nbtn" onclick="pp('5')">5</button>
    <button class="nbtn" onclick="pp('6')">6</button>
    <button class="nbtn" onclick="pp('7')">7</button>
    <button class="nbtn" onclick="pp('8')">8</button>
    <button class="nbtn" onclick="pp('9')">9</button>
    <button class="nbtn empty"></button>
    <button class="nbtn" onclick="pp('0')">0</button>
    <button class="nbtn" onclick="pd()">‚å´</button>
  </div>
  <button class="faceid-btn hidden" id="faceid-btn" onclick="tryBio()">Face ID / Touch ID</button>
</div>

<!-- SHELL -->
<div id="shell">

  <!-- SIDEBAR (iPad/desktop) -->
  <nav id="sidebar">
    <div class="side-logo">üåø V√§lm√•ende</div>
    <button class="side-btn active" onclick="showTab('gratitude',this)" id="sb-gratitude">
      <span class="ico">‚ô•</span> Tacksamhet
    </button>
    <button class="side-btn" onclick="showTab('calm',this)" id="sb-calm">
      <span class="ico">üßò</span> Lugn & Ro
    </button>
    <button class="side-btn" onclick="showTab('inspire',this)" id="sb-inspire">
      <span class="ico">‚ú®</span> Pepp
    </button>
    <button class="side-btn" onclick="showTab('general',this)" id="sb-general">
      <span class="ico">üìä</span> Allm√§nt
    </button>
    <button class="side-btn" onclick="showTab('settings',this)" id="sb-settings">
      <span class="ico">‚öôÔ∏è</span> Inst√§llningar
    </button>
    <div class="side-version">v2.0 ¬∑ jouhil.github.io</div>
  </nav>

  <!-- CONTENT -->
  <div id="content">

    <!-- TAB: TACKSAMHET -->
    <div id="tab-gratitude" class="tab active">
      <div class="grat-header">
        <div class="page-title">Dagens Tacksamhet</div>
        <button class="btn3d" onclick="renderGratitude()">Nya tankar ‚ú®</button>
      </div>
      <div id="grat-cont"></div>
    </div>

    <!-- TAB: LUGN -->
    <div id="tab-calm" class="tab">
      <div class="calm-title">üåä Lugn & Ro</div>
      <div id="timer-disp">00:00</div>
      <div id="breath-lbl">V√§lj tid och starta</div>

      <div class="breath-wrap" id="bwrap">
        <div class="b-ring" id="bring"></div>
        <div class="b-shine"></div>
        <div class="b-txt" id="btxt"></div>
      </div>

      <div class="time-input-row">
        <span class="time-label">‚è± Minuter:</span>
        <input type="number" class="time-input" id="custom-min" value="5" min="1" max="60" placeholder="5">
        <button class="calm-btn start-custom" onclick="startCustom()">Starta</button>
      </div>

      <div class="calm-btns">
        <button class="calm-btn" onclick="startBreath(180)">3 min</button>
        <button class="calm-btn" onclick="startBreath(300)">5 min</button>
        <button class="calm-btn" onclick="startBreath(600)">10 min</button>
        <button class="calm-btn stop" onclick="stopBreath()">‚èπ Stopp</button>
      </div>

      <div class="sound-panel">
        <div class="sound-row">
          <span class="snd-label">üåßÔ∏è Regn</span>
          <button class="snd-toggle" id="rain-btn" onclick="toggleSound('rain')">AV</button>
          <input type="range" id="rain-vol" min="0" max="1" step="0.05" value="0.35" oninput="setVol('rain',this.value)">
        </div>
        <div class="sound-row">
          <span class="snd-label">üåä Hav</span>
          <button class="snd-toggle" id="ocean-btn" onclick="toggleSound('ocean')">AV</button>
          <input type="range" id="ocean-vol" min="0" max="1" step="0.05" value="0.35" oninput="setVol('ocean',this.value)">
        </div>
      </div>
    </div>

    <!-- TAB: PEPP -->
    <div id="tab-inspire" class="tab">
      <div class="page-title">‚ú® Inspiration</div>
      <div class="pepp-stars">
        <span class="p-star">‚≠ê</span><span class="p-star">‚ú®</span><span class="p-star">‚≠ê</span>
      </div>
      <div class="pepp-card">
        <span class="pepp-emoji" id="pepp-emoji">üíö</span>
        <p id="quote-txt">Tryck p√• knappen f√∂r din dagliga dos pepp!</p>
      </div>
      <button class="pepp-btn" onclick="newQuote()">‚ö° Ge mig pepp!</button>
    </div>

    <!-- TAB: ALLM√ÑNT -->
    <div id="tab-general" class="tab">
      <div class="page-title">üìä Allm√§nt</div>

      <!-- El-pris -->
      <div class="card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;">
          <strong>‚ö° Elpris just nu</strong>
          <button onclick="fetchEl()" style="background:none;border:none;cursor:pointer;font-size:1.1rem;" title="Uppdatera">üîÑ</button>
        </div>
        <div class="info-grid" style="margin-bottom:8px;">
          <div class="info-card card-sm">
            <div class="info-icon">‚ö°</div>
            <div class="info-label">Aktuellt pris</div>
            <div class="info-value" id="el-now">‚Äì</div>
            <div class="info-sub">√∂re/kWh</div>
          </div>
          <div class="info-card card-sm">
            <div class="info-icon">üìâ</div>
            <div class="info-label">L√§gst idag</div>
            <div class="info-value" id="el-low">‚Äì</div>
            <div class="info-sub">√∂re/kWh</div>
          </div>
          <div class="info-card card-sm">
            <div class="info-icon">üìà</div>
            <div class="info-label">H√∂gst idag</div>
            <div class="info-value" id="el-high">‚Äì</div>
            <div class="info-sub">√∂re/kWh</div>
          </div>
        </div>
        <div class="el-zone">
          <span style="font-size:.85rem;color:var(--text2);">Zon:</span>
          <button class="zone-btn active" onclick="setZone('SE1',this)">SE1</button>
          <button class="zone-btn" onclick="setZone('SE2',this)">SE2</button>
          <button class="zone-btn" onclick="setZone('SE3',this)">SE3</button>
          <button class="zone-btn" onclick="setZone('SE4',this)">SE4</button>
        </div>
        <div style="font-size:.75rem;color:var(--text2);margin-top:8px;text-align:center;" id="el-updated"></div>
      </div>

      <!-- Statistik -->
      <div class="card">
        <strong>üìà Din statistik</strong>
        <ul class="stat-list" style="margin-top:12px;">
          <li class="stat-item"><span>üßò Andningsminuter totalt</span><span class="stat-val" id="st-breath">0 min</span></li>
          <li class="stat-item"><span>‚ô• Tacksamheter visade</span><span class="stat-val" id="st-grat">0</span></li>
          <li class="stat-item"><span>‚ö° Pepp-citat l√§sta</span><span class="stat-val" id="st-pepp">0</span></li>
          <li class="stat-item"><span>üìÖ Dagar i rad (streak)</span><span class="stat-val" id="st-streak">0</span></li>
        </ul>
        <div style="text-align:center;margin-top:10px;">
          <span class="streak-badge" id="streak-badge">üî• 0 dagars streak</span>
        </div>
        <button onclick="resetStats()" style="margin-top:12px;background:none;border:1.5px solid var(--border);color:var(--text2);padding:6px 16px;border-radius:10px;font-family:inherit;font-size:.82rem;cursor:pointer;width:100%;">Nollst√§ll statistik</button>
      </div>
    </div>

    <!-- TAB: INST√ÑLLNINGAR -->
    <div id="tab-settings" class="tab">
      <div class="page-title">‚öôÔ∏è Inst√§llningar</div>
      <div id="screen-info"></div>

      <div class="s-card">
        <h3>üé® Tema</h3>
        <div class="theme-sel">
          <button class="theme-opt" id="th-light" onclick="setTheme('light')">‚òÄÔ∏è Ljust</button>
          <button class="theme-opt" id="th-dark" onclick="setTheme('dark')">üåô M√∂rkt</button>
          <button class="theme-opt active" id="th-auto" onclick="setTheme('auto')">üåó Auto (19‚Äì07)</button>
        </div>
      </div>

      <div class="s-card">
        <h3>üîí S√§kerhet</h3>
        <div class="s-row">
          <span class="s-lbl">Face ID / Touch ID</span>
          <label class="toggle"><input type="checkbox" id="bioToggle" onchange="onBioToggle(this.checked)"><span class="slider"></span></label>
        </div>
      </div>

      <div class="s-card">
        <h3>‚ô• Egna tacksamhetstexter</h3>
        <div class="input-row">
          <input type="text" class="txt-in" id="newGratIn" placeholder="T.ex. Tacksam f√∂r solen..." maxlength="120">
          <button class="add-btn" onclick="addGrat()">+ L√§gg till</button>
        </div>
        <div class="item-list" id="grat-list"></div>
      </div>

      <div class="s-card">
        <h3>‚ú® Egna inspirationscitat</h3>
        <div class="input-row">
          <input type="text" class="txt-in" id="newQuoteIn" placeholder="T.ex. Du √§r stark nog!" maxlength="160">
          <button class="add-btn" onclick="addQuote()">+ L√§gg till</button>
        </div>
        <div class="item-list" id="quote-list"></div>
      </div>
    </div>

  </div><!-- /content -->

  <!-- BOTTOM NAV (mobile) -->
  <nav id="bottomnav">
    <button class="bnav-btn active" onclick="showTab('gratitude',this)"><span class="ico">‚ô•</span>Tacksam</button>
    <button class="bnav-btn" onclick="showTab('calm',this)"><span class="ico">üßò</span>Lugn</button>
    <button class="bnav-btn" onclick="showTab('inspire',this)"><span class="ico">‚ú®</span>Pepp</button>
    <button class="bnav-btn" onclick="showTab('general',this)"><span class="ico">üìä</span>Allm√§nt</button>
    <button class="bnav-btn" onclick="showTab('settings',this)"><span class="ico">‚öôÔ∏è</span>Inst√§lln.</button>
  </nav>

</div><!-- /shell -->

<script>
// ‚ïê‚ïê‚ïê PIN ‚ïê‚ïê‚ïê
const PIN = '486810';
let pe = '';
function ud(){for(let i=0;i<6;i++){const d=document.getElementById('d'+i);d.classList.remove('filled','error');if(i<pe.length)d.classList.add('filled');}}
function pp(digit){if(pe.length>=6)return;pe+=digit;ud();document.getElementById('lock-err').innerText='';if(pe.length===6)setTimeout(chkPin,150);}
function pd(){pe=pe.slice(0,-1);ud();document.getElementById('lock-err').innerText='';}
function chkPin(){
  if(pe===PIN){unlock();return;}
  for(let i=0;i<6;i++){document.getElementById('d'+i).classList.remove('filled');document.getElementById('d'+i).classList.add('error');}
  document.getElementById('lock-err').innerText='Fel PIN-kod, f√∂rs√∂k igen';
  setTimeout(()=>{for(let i=0;i<6;i++)document.getElementById('d'+i).classList.remove('error');pe='';ud();},800);
}
function unlock(){document.getElementById('lock').classList.add('hidden');updateStreak();}

// ‚ïê‚ïê‚ïê BIOMETRICS ‚ïê‚ïê‚ïê
async function tryBio(){
  if(!window.PublicKeyCredential){document.getElementById('lock-err').innerText='Biometri ej tillg√§nglig';return;}
  const cid=localStorage.getItem('bioCred');
  if(!cid){document.getElementById('lock-err').innerText='Aktivera Face ID i Inst√§llningar';return;}
  try{
    const ch=new Uint8Array(32);crypto.getRandomValues(ch);
    const a=await navigator.credentials.get({publicKey:{challenge:ch,allowCredentials:[{id:b64toBuf(cid),type:'public-key',transports:['internal']}],userVerification:'required',timeout:60000}});
    if(a)unlock();
  }catch(e){document.getElementById('lock-err').innerText='Biometri misslyckades, ange PIN';}
}
async function regBio(){
  if(!window.PublicKeyCredential){alert('Face ID st√∂ds ej');document.getElementById('bioToggle').checked=false;return;}
  try{
    const ch=new Uint8Array(32);crypto.getRandomValues(ch);
    const uid=new Uint8Array(16);crypto.getRandomValues(uid);
    const c=await navigator.credentials.create({publicKey:{challenge:ch,rp:{name:'V√§lm√•ende-app'},user:{id:uid,name:'user',displayName:'Anv√§ndare'},pubKeyCredParams:[{type:'public-key',alg:-7}],authenticatorSelection:{authenticatorAttachment:'platform',userVerification:'required'},timeout:60000}});
    localStorage.setItem('bioCred',bufToB64(c.rawId));localStorage.setItem('bioOn','1');
    document.getElementById('faceid-btn').classList.remove('hidden');alert('Face ID aktiverat! ‚úÖ');
  }catch(e){alert('Kunde inte aktivera: '+e.message);document.getElementById('bioToggle').checked=false;}
}
function onBioToggle(on){if(on){regBio();}else{localStorage.setItem('bioOn','0');localStorage.removeItem('bioCred');document.getElementById('faceid-btn').classList.add('hidden');}}
function bufToB64(b){return btoa(String.fromCharCode(...new Uint8Array(b)));}
function b64toBuf(s){const bin=atob(s);const buf=new Uint8Array(bin.length);for(let i=0;i<bin.length;i++)buf[i]=bin.charCodeAt(i);return buf.buffer;}

// ‚ïê‚ïê‚ïê RESIZE ‚ïê‚ïê‚ïê
function resizeApp(){
  const shell=document.getElementById('shell');
  shell.style.height=window.innerHeight+'px';
}
resizeApp();
window.addEventListener('resize',resizeApp);
window.addEventListener('orientationchange',()=>setTimeout(resizeApp,300));

// ‚ïê‚ïê‚ïê DATA ‚ïê‚ïê‚ïê
const defGrat=["Tacksam f√∂r kaffet.","Tacksam f√∂r vilan.","Tacksam f√∂r v√§nner.","Tacksam f√∂r musiken.","Tacksam f√∂r h√§lsan.","Tacksam f√∂r Anton min son.","Tacksam f√∂r ett varmt hem.","Tacksam f√∂r det man har.","Jag har h√§lsa.","Jag har v√§nner.","Jag bor bra.","Anton min son.","Pappa.","Anna.","Att f√• √§ta gott.","Tid utan m√•sten.","En god kopp te.","Tacksam f√∂r det jag har.","Att kunna s√§ga nej. och det √§r ok","Att kunna s√§ga tack.","Stunder av lugn.","Naturen runt mig.","Gemenskap och n√§rhet."];
const defQuotes=["Du klarar detta!","Varje dag √§r ett nytt b√∂rjande.","Du √§r starkare √§n du tror.","Ta ett andetag ‚Äì du g√∂r ditt b√§sta.","Framsteg, inte perfektion.","Jag g√∂r s√• gott jag kan ‚Äì och det r√§cker f√∂r idag.","Jag √§r v√§rd respekt fr√•n andra och fr√•n mig sj√§lv.","Jag till√•ter mig sj√§lv att vila, √§ven om jag inte 'f√∂rtj√§nat' det.","Jag l√§r mig och utvecklas varje dag.","Varje dag tar jag steg mot mitt b√§sta jag.","Jag √§r kapabel att hantera utmaningar.","Jag √§r mer √§n tillr√§cklig, och jag har allt jag beh√∂ver inom mig.","Jag accepterar och √§lskar mig sj√§lv precis som jag √§r.","Mina k√§nslor √§r ok, √§ven de tr√∂tta och irriterade.","Jag √§r t√•lmodig mot min egen utveckling.","Jag ser mina styrkor och v√§xer varje dag.","Jag till√•ter gl√§dje och sj√§lvk√§rlek."];
function loadL(k,fb){const s=localStorage.getItem(k);return s?JSON.parse(s):[...fb];}
function saveL(k,a){localStorage.setItem(k,JSON.stringify(a));}
let myGrat=loadL('gratList',defGrat);
let myQuotes=loadL('quoteList',defQuotes);

// ‚ïê‚ïê‚ïê THEME ‚ïê‚ïê‚ïê
let currentTheme=localStorage.getItem('theme')||'auto';
function isNight(){const h=new Date().getHours();return h>=19||h<7;}
function applyTheme(){
  const dark=currentTheme==='dark'||(currentTheme==='auto'&&isNight());
  document.body.classList.toggle('dark',dark);
}
function setTheme(t){
  currentTheme=t;localStorage.setItem('theme',t);applyTheme();
  document.querySelectorAll('.theme-opt').forEach(b=>b.classList.remove('active'));
  document.getElementById('th-'+t).classList.add('active');
}
setInterval(()=>{if(currentTheme==='auto')applyTheme();},60000);

// ‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê
(function init(){
  applyTheme();
  const t=localStorage.getItem('theme')||'auto';
  document.querySelectorAll('.theme-opt').forEach(b=>b.classList.remove('active'));
  document.getElementById('th-'+t).classList.add('active');
  const bioOn=localStorage.getItem('bioOn')==='1';
  document.getElementById('bioToggle').checked=bioOn;
  if(bioOn){document.getElementById('faceid-btn').classList.remove('hidden');setTimeout(tryBio,400);}
  loadStats();
  updateScreenInfo();
})();

// ‚ïê‚ïê‚ïê NAVIGATION ‚ïê‚ïê‚ïê
function showTab(name, btn){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('tab-'+name).classList.add('active');
  // sidebar
  document.querySelectorAll('.side-btn').forEach(b=>b.classList.remove('active'));
  const sb=document.getElementById('sb-'+name);
  if(sb)sb.classList.add('active');
  // bottomnav
  document.querySelectorAll('.bnav-btn').forEach(b=>b.classList.remove('active'));
  if(btn)btn.classList.add('active');
  if(name!=='calm')stopBreath();
  if(name==='settings'){renderLists();updateScreenInfo();}
  if(name==='general'){fetchEl();loadStats();}
}

function updateScreenInfo(){
  const w=window.innerWidth,h=window.innerHeight;
  const d=w>=1024?'üñ•Ô∏è Dator':w>=768?'üì± iPad':'üì± Mobil';
  const el=document.getElementById('screen-info');
  if(el)el.innerText=d+' ¬∑ '+w+'√ó'+h+'px';
}
window.addEventListener('resize',updateScreenInfo);

// ‚ïê‚ïê‚ïê FLIK 1: TACKSAMHET ‚ïê‚ïê‚ïê
const natIDs=[10,11,12,13,14,16,17,18,19,20,21,22,23,24,25,26,27,29,30,31];
function renderGratitude(){
  const c=document.getElementById('grat-cont');c.innerHTML='';
  const ids=[...natIDs].sort(()=>0.5-Math.random());
  const txts=[...myGrat].sort(()=>0.5-Math.random()).slice(0,3);
  const colors=['#111111','#1a3a6b','#1a5c2a'];
  const emojis=['üåø','üíô','üå±'];
  // Image
  const iw=document.createElement('div');iw.style.cssText='margin-bottom:12px;border-radius:16px;overflow:hidden;';
  const img=document.createElement('img');img.src='https://picsum.photos/id/'+ids[0]+'/900/400';
  img.className='grat-img';img.onerror=function(){this.style.display='none';};
  iw.appendChild(img);c.appendChild(iw);
  // Sentences
  const tc=document.createElement('div');tc.className='card';tc.style.textAlign='left';
  txts.forEach((t,i)=>{
    const p=document.createElement('p');p.className='grat-line';
    p.style.color=colors[i];p.innerHTML='<span>'+emojis[i]+'</span>'+t;
    tc.appendChild(p);
  });
  c.appendChild(tc);
  incStat('grat');
}

// ‚ïê‚ïê‚ïê FLIK 2: LUGN ‚ïê‚ïê‚ïê
let timerInt,breathInt;

function startCustom(){
  const mins=parseInt(document.getElementById('custom-min').value)||5;
  startBreath(mins*60);
}

function startBreath(secs){
  stopBreath();
  document.getElementById('bwrap').classList.add('show');
  let left=secs;updateTimerDisp(left);
  runCycle();breathInt=setInterval(runCycle,12000);
  timerInt=setInterval(()=>{
    left--;updateTimerDisp(left);
    incStat('breath_sec');
    if(left<=0){stopBreath();alert('Bra jobbat! üåø');}
  },1000);
}

function runCycle(){
  animB('in');
  setTimeout(()=>animB('hold'),4000);
  setTimeout(()=>animB('out'),8000);
}
function animB(phase){
  const ring=document.getElementById('bring');
  const lbl=document.getElementById('breath-lbl');
  const txt=document.getElementById('btxt');
  ring.style.animation='none';void ring.offsetWidth;
  if(phase==='in'){lbl.innerText='üå¨Ô∏è Andas in...';lbl.style.color='#a5f3fc';txt.innerText='In\n4s';ring.style.animation='bIn 4s ease-in-out forwards';}
  else if(phase==='hold'){lbl.innerText='‚è∏Ô∏è H√•ll andan...';lbl.style.color='#fde68a';txt.innerText='H√•ll\n4s';ring.style.animation='bHold 4s ease-in-out forwards';}
  else{lbl.innerText='üí® Andas ut...';lbl.style.color='#bbf7d0';txt.innerText='Ut\n4s';ring.style.animation='bOut 4s ease-in-out forwards';}
}
function stopBreath(){
  clearInterval(timerInt);clearInterval(breathInt);
  document.getElementById('timer-disp').innerText='00:00';
  document.getElementById('breath-lbl').innerText='V√§lj tid och starta';
  document.getElementById('btxt').innerText='';
  document.getElementById('bwrap').classList.remove('show');
  document.getElementById('bring').style.animation='none';
  stopAllSounds();
}
function updateTimerDisp(s){const m=Math.floor(s/60),sec=s%60;document.getElementById('timer-disp').innerText=String(m).padStart(2,'0')+':'+String(sec).padStart(2,'0');}

// ‚ïê‚ïê‚ïê LJUD ‚ïê‚ïê‚ïê
let AC=null,sounds={};
function getAC(){
  if(!AC){const A=window.AudioContext||window.webkitAudioContext;if(A)AC=new A();}
  if(AC&&AC.state==='suspended')AC.resume();
  return AC;
}

function makeRain(){
  const ac=getAC();if(!ac)return null;
  // Layered noise for natural rain
  const gain=ac.createGain();gain.gain.value=0;gain.connect(ac.destination);
  function addLayer(freq,q,vol){
    const buf=ac.createBuffer(1,ac.sampleRate*3,ac.sampleRate);
    const d=buf.getChannelData(0);for(let i=0;i<d.length;i++)d[i]=Math.random()*2-1;
    const src=ac.createBufferSource();src.buffer=buf;src.loop=true;
    const f=ac.createBiquadFilter();f.type='bandpass';f.frequency.value=freq;f.Q.value=q;
    const g=ac.createGain();g.gain.value=vol;
    src.connect(f);f.connect(g);g.connect(gain);src.start();
    return src;
  }
  addLayer(600,0.8,0.6);addLayer(1200,1.2,0.4);addLayer(3000,2,0.2);
  return {gain,type:'rain'};
}

function makeOcean(){
  const ac=getAC();if(!ac)return null;
  const gain=ac.createGain();gain.gain.value=0;gain.connect(ac.destination);
  // LFO-modulated noise for wave effect
  const buf=ac.createBuffer(1,ac.sampleRate*4,ac.sampleRate);
  const d=buf.getChannelData(0);for(let i=0;i<d.length;i++)d[i]=Math.random()*2-1;
  const src=ac.createBufferSource();src.buffer=buf;src.loop=true;
  const f=ac.createBiquadFilter();f.type='lowpass';f.frequency.value=400;
  const lfo=ac.createOscillator();lfo.frequency.value=0.1;
  const lfoGain=ac.createGain();lfoGain.gain.value=200;
  lfo.connect(lfoGain);lfoGain.connect(f.frequency);lfo.start();
  src.connect(f);f.connect(gain);src.start();
  return {gain,type:'ocean'};
}

function toggleSound(type){
  const btn=document.getElementById(type+'-btn');
  if(!sounds[type]){
    sounds[type]=type==='rain'?makeRain():makeOcean();
  }
  if(!sounds[type])return;
  const g=sounds[type].gain;
  if(g.gain.value===0){
    const vol=parseFloat(document.getElementById(type+'-vol').value);
    g.gain.setTargetAtTime(vol,getAC().currentTime,0.3);
    btn.innerText=type==='rain'?'P√Ö üåßÔ∏è':'P√Ö üåä';btn.classList.add('on');
  }else{
    g.gain.setTargetAtTime(0,getAC().currentTime,0.3);
    btn.innerText='AV';btn.classList.remove('on');
  }
}
function setVol(type,v){
  if(sounds[type]&&sounds[type].gain.gain.value>0){
    sounds[type].gain.gain.setTargetAtTime(parseFloat(v),getAC().currentTime,0.1);
  }
}
function stopAllSounds(){
  ['rain','ocean'].forEach(t=>{
    if(sounds[t]){sounds[t].gain.gain.setTargetAtTime(0,getAC()?.currentTime||0,0.3);}
    document.getElementById(t+'-btn').innerText='AV';
    document.getElementById(t+'-btn').classList.remove('on');
  });
}

// ‚ïê‚ïê‚ïê FLIK 3: PEPP ‚ïê‚ïê‚ïê
const pEmojis=['üíö','‚≠ê','üå±','‚ú®','üí™','üåü','üî•','üåà','üíé','ü¶ã','üå∫','‚òÄÔ∏è'];
function newQuote(){
  document.getElementById('quote-txt').innerText=myQuotes[Math.floor(Math.random()*myQuotes.length)];
  document.getElementById('pepp-emoji').innerText=pEmojis[Math.floor(Math.random()*pEmojis.length)];
  incStat('pepp');
}

// ‚ïê‚ïê‚ïê FLIK 4: ALLM√ÑNT - ELPRIS ‚ïê‚ïê‚ïê
let elZone='SE3';
function setZone(z,btn){
  elZone=z;
  document.querySelectorAll('.zone-btn').forEach(b=>b.classList.remove('active'));
  if(btn)btn.classList.add('active');
  fetchEl();
}
async function fetchEl(){
  try{
    const now=new Date();
    const y=now.getFullYear();
    const m=String(now.getMonth()+1).padStart(2,'0');
    const d=String(now.getDate()).padStart(2,'0');
    const url=`https://www.elprisetjustnu.se/api/v1/prices/${y}/${m}-${d}_${elZone}.json`;
    const r=await fetch(url);
    if(!r.ok)throw new Error('API fel');
    const data=await r.json();
    const h=now.getHours();
    const cur=data[h];
    const prices=data.map(x=>x.SEK_per_kWh*100);
    const curOre=Math.round(cur.SEK_per_kWh*100);
    const low=Math.round(Math.min(...prices));
    const high=Math.round(Math.max(...prices));
    document.getElementById('el-now').innerText=curOre;
    document.getElementById('el-low').innerText=low;
    document.getElementById('el-high').innerText=high;
    document.getElementById('el-updated').innerText='Uppdaterad '+now.toLocaleTimeString('sv-SE',{hour:'2-digit',minute:'2-digit'})+' ¬∑ Zon '+elZone;
  }catch(e){
    document.getElementById('el-now').innerText='‚Äì';
    document.getElementById('el-updated').innerText='Kunde inte h√§mta elpris. Kontrollera internet.';
  }
}

// ‚ïê‚ïê‚ïê STATISTIK ‚ïê‚ïê‚ïê
function loadStats(){
  const s=JSON.parse(localStorage.getItem('stats')||'{}');
  const mins=Math.floor((s.breath_sec||0)/60);
  document.getElementById('st-breath').innerText=mins+' min';
  document.getElementById('st-grat').innerText=s.grat||0;
  document.getElementById('st-pepp').innerText=s.pepp||0;
  const streak=s.streak||0;
  document.getElementById('st-streak').innerText=streak;
  document.getElementById('streak-badge').innerText='üî• '+streak+' dagars streak';
}
function incStat(key){
  const s=JSON.parse(localStorage.getItem('stats')||'{}');
  s[key]=(s[key]||0)+1;
  localStorage.setItem('stats',JSON.stringify(s));
  loadStats();
}
function resetStats(){
  if(confirm('Nollst√§lla all statistik?')){localStorage.removeItem('stats');loadStats();}
}
function updateStreak(){
  const s=JSON.parse(localStorage.getItem('stats')||'{}');
  const today=new Date().toDateString();
  if(s.lastDay===today)return;
  const yesterday=new Date(Date.now()-86400000).toDateString();
  s.streak=s.lastDay===yesterday?(s.streak||0)+1:1;
  s.lastDay=today;
  localStorage.setItem('stats',JSON.stringify(s));
  loadStats();
}

// ‚ïê‚ïê‚ïê INST√ÑLLNINGAR ‚ïê‚ïê‚ïê
function renderLists(){
  renderList('grat-list',myGrat,removeGrat);
  renderList('quote-list',myQuotes,removeQuote);
}
function renderList(id,arr,fn){
  const el=document.getElementById(id);el.innerHTML='';
  arr.forEach((t,i)=>{
    const d=document.createElement('div');d.className='list-item';
    d.innerHTML='<span>'+t+'</span><button class="del-btn" onclick="('+fn.name+')('+i+')">‚úï</button>';
    el.appendChild(d);
  });
}
function addGrat(){const i=document.getElementById('newGratIn');const v=i.value.trim();if(!v)return;myGrat.push(v);saveL('gratList',myGrat);i.value='';renderLists();}
function removeGrat(i){myGrat.splice(i,1);saveL('gratList',myGrat);renderLists();}
function addQuote(){const i=document.getElementById('newQuoteIn');const v=i.value.trim();if(!v)return;myQuotes.push(v);saveL('quoteList',myQuotes);i.value='';renderLists();}
function removeQuote(i){myQuotes.splice(i,1);saveL('quoteList',myQuotes);renderLists();}

// ‚ïê‚ïê‚ïê START ‚ïê‚ïê‚ïê
renderGratitude();
newQuote();
</script>
</body>
</html>
